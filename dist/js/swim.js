function arrow(){move=37,pos=2,$(".man").css({left:move+"%"}),$(".arrow-left").unbind().on("click",function(){pos>1&&(pos-=1,move-=32,$(".man").css({left:move+"%"}))}),$(".arrow-right").unbind().on("click",function(){pos<3&&(pos+=1,move+=32,$(".man").css({left:move+"%"}))})}function showobs(){dis=0,second=0,$(".distance .num").text(dis),$(".time .num").text(second),$(".stage-2").hasClass("hide")||(append=setInterval(function(){$(".obss").append("<img src='/img/obs-"+(1+Math.floor(8*Math.random()))+".png' class='obs rpos-"+(1+Math.floor(3*Math.random()))+"'>")},3e3),remove=setInterval(function(){document.getElementsByClassName("obs").length>2&&$(".obss").children().first().remove()},3e3),distance=setInterval(function(){dis+=1,$(".distance .num").text(dis)},500),time=setInterval(function(){second+=1,$(".time .num").text(second)},1e3))}function gameover(){obss=document.getElementsByClassName("obs"),man=document.getElementsByClassName("man"),hit=setInterval(function(){for(var e=0;e<obss.length;e++){obss[e].offsetTop+obss[e].clientHeight>man[0].offsetTop&&obss[e].className=="obs rpos-"+pos&&(clearInterval(append),clearInterval(remove),clearInterval(time),clearInterval(distance),$(".obss").children().remove(),$(".stage-3").removeClass("hide").siblings().addClass("hide"),setTimeout(function(){$(".end,.count").addClass("end-show")},500),$(".count").text("本局共游了"+dis+"米"))}},500)}$(document).ready(function(){$(".button-rule,.rules-close").click(function(){$(".rules").toggleClass("rules-show")}),$(".button-play").click(function(){$(".stage-2").removeClass("hide").siblings().addClass("hide"),arrow(),showobs(),gameover()}),$(".button-share").click(function(){$(".share").css({display:"block"})}),$(".button-replay").click(function(){$(".stage-1").removeClass("hide").siblings().addClass("hide"),clearInterval(hit)}),$(".share").click(function(){$(this).css({display:"none"})})});var pos,move,dis,second,append,remove,distance,time,hit,obss,man;